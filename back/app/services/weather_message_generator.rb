module WeatherMessageGenerator
  def self.generate_message(prefecture_name, weather_info)
    text = "ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ï¼\nä»Šæ—¥ã®#{prefecture_name}ã®å¤©æ°—æƒ…å ±ã‚’ãŠå±Šã‘ã—ã¾ã™âœ‰ï¸\n\n"
    text += "â˜€ï¸ç¾åœ¨ã®UVæŒ‡æ•°ã¯#{weather_info[:current_uvi]}ã€æœ€é«˜UVæŒ‡æ•°ã¯#{weather_info[:daily_max_uvi]}ã§ã™ã€‚\n"
    text += uv_index_advice(weather_info[:current_uvi], weather_info[:daily_max_uvi])
    text += "âœ”ï¸UVæŒ‡æ•°ã¯ã€1ã€œ2ãŒã€Œå¼±ã„ã€ã€3ã€œ5ãŒã€Œä¸­ç¨‹åº¦ã€ã€6ä»¥ä¸ŠãŒã€Œå¼·ã„ã€ã¨ã„ã‚ã‚Œã¦ã„ã¾ã™ã€‚\n\n"
    text += "ğŸ’§ç¾åœ¨ã®æ¹¿åº¦ã¯#{weather_info[:current_humidity]}%ã€æœ€ä½æ¹¿åº¦ã¯#{weather_info[:daily_min_humidity]}%ã§ã™ã€‚\n"
    text += humidity_advice(weather_info[:current_humidity], weather_info[:daily_min_humidity])
    text += "âœ”ï¸ãŠè‚Œã«æœ€é©ãªæ¹¿åº¦ã¯ã€50ã€œ60%ã¨ã„ã‚ã‚Œã¦ã„ã¾ã™ã€‚\n\n"
    text += "ã“ã®æƒ…å ±ãŒå°‘ã—ã§ã‚‚çš†ã•ã‚“ã®ãŠå½¹ã«ç«‹ã¡ã¾ã™ã‚ˆã†ã«ã€‚\n"
    text += "ä»Šæ—¥ã‚‚KoreCareã‚’ã”åˆ©ç”¨ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚"
  end

  def self.uv_index_advice(current_uvi, daily_max_uvi)
    return "UVæŒ‡æ•°æƒ…å ±ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚" if current_uvi.nil? || daily_max_uvi.nil?

    if current_uvi >= 6
      "ç¾åœ¨UVæŒ‡æ•°ãŒé«˜ã„ã§ã™ã€‚æ—¥ç„¼ã‘ã‚’é˜²ããŸã‚ã«æ—¥å‚˜ã‚„æ—¥ç„¼ã‘æ­¢ã‚ã®åˆ©ç”¨ã€é•·è¢–ã‚„å¸½å­ã®ç€ç”¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚\n"
    elsif current_uvi.between?(3, 5)
      "ç¾åœ¨UVæŒ‡æ•°ã¯ä¸­ç¨‹åº¦ã§ã™ã€‚æ—¥ç„¼ã‘ã‚’é˜²ããŸã‚ã«æ—¥å‚˜ã‚„æ—¥ç„¼ã‘æ­¢ã‚ã®åˆ©ç”¨ã€é•·è¢–ã‚„å¸½å­ã®ç€ç”¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚\n"
    elsif daily_max_uvi >= 6
      "ã¾ãŸã€ã“ã‚Œã‹ã‚‰UVæŒ‡æ•°ãŒé«˜ããªã‚‹äºˆå ±ãŒå‡ºã¦ã„ã¾ã™ã€‚æ—¥ç„¼ã‘ã‚’é˜²ããŸã‚ã«æ—¥å‚˜ã‚„æ—¥ç„¼ã‘æ­¢ã‚ã®åˆ©ç”¨ã€é•·è¢–ã‚„å¸½å­ã®ç€ç”¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚\n"
    else
      "UVæŒ‡æ•°ã¯é€šå¸¸ç¯„å›²å†…ã§ã™ã€‚\n\n"
    end
  end

  def self.humidity_advice(current_humidity, daily_min_humidity)
    return "æ¹¿åº¦æƒ…å ±ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚" if current_humidity.nil? || daily_min_humidity.nil?

    if current_humidity <= 30 || daily_min_humidity <= 30
      "ç¾åœ¨ç©ºæ°—ãŒä¹¾ç‡¥ã—ã¦ã„ã¾ã™ã€‚ãƒŸã‚¹ãƒˆåŒ–ç²§æ°´ã‚„ã‚¯ãƒªãƒ¼ãƒ ã‚’æ´»ç”¨ã—ã¦ã€é©å®œã†ã‚‹ãŠã„ã‚’è£œçµ¦ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚\n"
    elsif current_humidity.between?(30, 50)
      "ç¾åœ¨ç©ºæ°—ãŒã‚„ã‚„ä¹¾ç‡¥ã—ã¦ã„ã¾ã™ã€‚ãƒŸã‚¹ãƒˆåŒ–ç²§æ°´ã‚„ã‚¯ãƒªãƒ¼ãƒ ã‚’æ´»ç”¨ã—ã¦ã€é©å®œã†ã‚‹ãŠã„ã‚’è£œçµ¦ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚\n"
    elsif daily_min_humidity < 50
      "ã¾ãŸã€æœ€ä½æ¹¿åº¦ãŒ50%ã‚’ä¸‹å›ã‚‹äºˆå ±ãŒå‡ºã¦ã„ã¾ã™ã€‚ãŠè‚Œã®ä¹¾ç‡¥ãŒæ°—ã«ãªã£ãŸéš›ã¯ãƒŸã‚¹ãƒˆåŒ–ç²§æ°´ã‚„ã‚¯ãƒªãƒ¼ãƒ ã‚’æ´»ç”¨ã—ã¦ã€é©å®œã†ã‚‹ãŠã„ã‚’è£œçµ¦ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚\n\n"
    else
      "ç¾åœ¨æ¹¿åº¦ã¯é€šå¸¸ç¯„å›²å†…ã§ã™ãŒã€ãŠè‚Œã®ä¹¾ç‡¥ãŒæ°—ã«ãªã£ãŸéš›ã¯ãƒŸã‚¹ãƒˆåŒ–ç²§æ°´ã‚„ã‚¯ãƒªãƒ¼ãƒ ã‚’æ´»ç”¨ã—ã¦ã€ã†ã‚‹ãŠã„ã‚’è£œçµ¦ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚\n"
    end
  end
end
